<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Developers Guide</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Developers Guide</h1>



<p>Contributions are welcome and can come in different forms, including
but not limited to:</p>
<ul>
<li>Adding new features.</li>
<li>Improving documentation.</li>
<li>Addressing one of the open issues.</li>
<li>Creating new issues.</li>
<li>Even fixing typos.</li>
</ul>
<p>Please read the following documents before making changes to the
codebase.</p>
<div id="environment-setup" class="section level2">
<h2>Environment Setup</h2>
<p>In order to contribute to the project, it is a better idea to have
your own local copy of <em>CausalGPS</em> on your Github account. Here
are the steps:</p>
<ul>
<li>Navigate to CausalGPS Github <a href="https://github.com/NSAPH-Software/CausalGPS/">repository</a>, and
at the top right corner, click on the <code>Fork</code> button. This
will add a clone of the project to your Github account.</li>
<li>Open your terminal (or Gitbash for Windows, Anaconda prompt, …) and
run the following command (brackets are not included):</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode s"><code class="sourceCode gnuassembler"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>git clone git<span class="co">@github.com:[your user name]/CausalGPS.git</span></span></code></pre></div>
<ul>
<li>If you do not already have an SSH key, you need to generate one.
Read more <a href="https://docs.github.com/en/github-ae@latest/github/authenticating-to-github/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">here</a>.</li>
<li>Now, you can modify the codebase and track your modification.</li>
<li>It is a good idea to create a new branch to work on the codebase.
Read the following instructions for git branching.</li>
</ul>
</div>
<div id="git-branching-model" class="section level2">
<h2>Git Branching Model</h2>
<p>Although, in your personal repository, you can pick any branch name,
however, in order to keep consistency and also understand who is working
on what, the following convention is strongly recommended. In this
project, we follow the convention that is proposed by Vincent Driessen
in his <a href="https://nvie.com/posts/a-successful-git-branching-model/">A
successful Git branching model</a> post.</p>
<p>Here is the summary of the branches:</p>
<ul>
<li><strong>master</strong>: master branch only hosts the released
software packages. Only project maintainers have write access on the
master branch.</li>
<li><strong>develop</strong>: develop branch is considered the main
branch where the source code of HEAD always reflects a state with the
latest delivered development changes for the next release.</li>
<li><strong>supporting</strong> branch: There are different supporting
branches, three main supporting branches that we suggest the
contributors to follow the naming convention includes:
<ul>
<li><em>feature</em>: we start a new feature branch to add new features
to the software. The naming convention is
iss[issue_number]_short_description. For example, if I need to add
unittest to one of the functions in the package and the issue number is
12, iss12_add_unittest can be a valid git branch name. We start it with
the issue number to go back and take a look at the issue details if
necessary. Although feature branches are temporary, this naming
convention helps developers to understand the situation while working on
the codebase. If you are working on some features that there is no open
issue for that, please open an issue <a href="https://github.com/NSAPH-Software/CausalGPS/issues/">here</a> and
assign it to yourself. You can also make a comment that you are working
on that.</li>
<li><em>hotfix</em>: hotfix branches will be only used for fixing a bug
on a released package. After fixing the bug, the third digit of the
version number should be incremented by one. For example, 2.3.5 –&gt;
2.3.6. These branches will be prefixed with hotfix and followed by the
upcoming version number (e.g., in this case, hotfix_2.3.6)</li>
<li><em>release</em>: Release branches support the preparation of a new
production release.</li>
</ul></li>
</ul>
</div>
<div id="where-to-submit-pull-requests" class="section level2">
<h2>Where to submit pull requests?</h2>
<p>All pull requests should be submitted to
<code>base repository: NSAPH-Software/CausalGPS</code> and
<code>base: develop</code> branch.</p>
</div>
<div id="pull-request-checklist" class="section level2">
<h2>Pull request checklist</h2>
<ul>
<li>Please run <code>devtools::document()</code>,
<code>devtools::load_all()</code> after your final modifications.</li>
<li>Make sure that your modified code passes all checks and tests (you
can run <code>devtools::check()</code> in RStudio)</li>
<li>Your PR should pass all the CI and reviews so we can merge it.</li>
<li>Add a line(s) about the modification to the NEWS.md file.</li>
<li>If you are adding new features, please make sure that appropriate
documentation is added or updated.</li>
<li>Please clean up white spaces. Read more <a href="https://softwareengineering.stackexchange.com/questions/121555/why-is-trailing-whitespace-a-big-deal/">here</a>.</li>
</ul>
</div>
<div id="reporting-bugs" class="section level2">
<h2>Reporting bugs</h2>
<p>Please report potential bugs by creating a <a href="https://github.com/NSAPH-Software/CausalGPS/issues/">new issue</a>
or sending us an email. Please include the following information in your
bug report:</p>
<ul>
<li>A brief description of what you are doing, what you expected to
happen, and what happened.</li>
<li>OS that you are using and whether you are using a personal computer
or HPC cluster.</li>
<li>The version of the package that you have installed.</li>
</ul>
</div>
<div id="style-guide" class="section level2">
<h2>Style Guide</h2>
<p>In this project, we follow the <a href="https://style.tidyverse.org/">tidyverse style guide</a>.</p>
<div id="summary" class="section level3">
<h3>Summary</h3>
<div id="names" class="section level4">
<h4>Names</h4>
<ul>
<li>File names all snake_case and ends with .R (e.g.,
create_matching.R)</li>
<li>variable names small letter and separate with _ if need (e.g.,
delta_n)</li>
<li>Function names should follow snake_case style (e.g.,
generate_data)</li>
<li>Function names follow verb+output convention (e.g.,
compute_resid)</li>
</ul>
</div>
<div id="spaces-and-indentation" class="section level4">
<h4>Spaces and Indentation</h4>
<ul>
<li>Indentations are two spaces (do not use tab)</li>
<li>Place space around binary operators (e.g., x + y)</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Acceptable:</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> x <span class="sc">+</span> y</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Not recommended:</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>z<span class="ot">&lt;-</span>x<span class="sc">+</span>y <span class="co"># (no space)</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>z<span class="ot">&lt;-</span> x<span class="sc">+</span>y</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>z<span class="ot">&lt;-</span>x <span class="sc">+</span>y</span></code></pre></div>
<ul>
<li>Place space after comma</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Acceptable:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>), <span class="at">nrow =</span> <span class="dv">5</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Not recommended:</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>),<span class="at">nrow =</span> <span class="dv">5</span>) <span class="co"># (no space after comma)</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">matrix</span>( <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>), <span class="at">nrow =</span> <span class="dv">5</span> ) <span class="co"># (extra space after and before parentheses)</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>a<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>), <span class="at">nrow =</span> <span class="dv">5</span>) <span class="co"># (no space around unary operator &lt;- )</span></span></code></pre></div>
<ul>
<li>Place space after # and before commenting and avoid multiple
###</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Acceptable:</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># This is a comment</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Not recommended:</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="co">#This is a comment</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">#    This is a comment (more than one space after #)</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="do">## This is a comment (multiple #)</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="do">###    This is a comment (multiple # and more than one space)</span></span></code></pre></div>
<ul>
<li>Do not put space at the opening and closing the parenthesis</li>
</ul>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Acceptable:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> (z <span class="sc">+</span> y)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#Not recommended:</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> ( z <span class="sc">+</span> y ) <span class="co"># (unnecessary space)</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> (z <span class="sc">+</span> y )</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> ( z <span class="sc">+</span> y)</span></code></pre></div>
<ul>
<li>Place a space before and after <code>()</code> when used with
<code>if</code>, <code>for</code>, or <code>while</code>.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Acceptible</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">2</span>) {</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(x)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Not recommended</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(x <span class="sc">&gt;</span> <span class="dv">2</span>){</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(x)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="other-notes" class="section level4">
<h4>Other notes</h4>
<ul>
<li>Maximum line length is 80 character</li>
<li>Use explicit returns</li>
<li>Use explicit tags in documentation (e.g., <span class="citation">@title</span>, <span class="citation">@description</span>, …)</li>
</ul>
</div>
</div>
</div>
<div id="notes-on-superlearner" class="section level2">
<h2>Notes on SuperLearner</h2>
<p>In this package we create a customized wrapper for the SuperLearner
internal libraries. Please read Notes on SL Wrappers for more
details.</p>
</div>
<div id="logger" class="section level2">
<h2>Logger</h2>
<p>Use logger to investigate the internal process. The default level is
“INFO”, which writes messages into “CausalGPS.log” file. You can use
<code>update_logger</code> function to change the log file location and
level.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
